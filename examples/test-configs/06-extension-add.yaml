name: 06-extension-add
description: "Test Config 6: Add extension metadata to ingested items"

settings:
  logging:
    level: "debug"

steps:
  # 1. Discovery
  - id: discovery
    module: DiscoveryModule
    config:
      catalog_url: "https://earth-search.aws.element84.com/v1"
      collection_ids: ["sentinel-2-l2a"]
      filters:
        spatial: [-10, 36, -9, 37]

  # 2. Fetch
  - id: fetch
    module: IngestModule
    depends_on: ["discovery"]
    config:
      limit: 1

  # 3. Extension: Add generic extension info
  - id: apply_eo
    module: ExtensionModule
    depends_on: ["fetch"]
    config:
      extension: "generic"
      # Concept: simple generic application
      schema_uri: "https://stac-extensions.github.io/eo/v1.0.0/schema.json"
      properties:
        "eo:cloud_cover": 10.5
        "eo:platform": "sentinel-2a"

  # 3. Output
  - id: output
    module: OutputModule
    depends_on: ["apply_eo"]
    config:
      format: "json"
      output_path: "data/output/test_06_extension"
