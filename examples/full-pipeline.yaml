name: full-pipeline-example
description: "End-to-End example: Discovery -> Ingest -> Transform -> Validate -> Output"

settings:
  logging:
    level: INFO

steps:
  # 1. Discover the Collection
  - id: discover
    module: DiscoveryModule
    config:
      catalog_url: "https://stac.easierdata.info/"
      collection_ids: ["HLSS30_2.0"]

  # 2. Ingest Items (Fetch)
  - id: ingest
    module: IngestModule
    config:
      limit: 5 # Keep it small for quick verification
      concurrency: 2

    depends_on: ["discover"]

  # 3. Transform Metadata (Modify)
  - id: transform
    module: TransformModule
    depends_on: ["ingest"]
    config:
      strategy: "merge"
      mappings:
        # Example: Backup original ID
        - source_field: "id"
          target_field: "properties.original_id"
          type: "string"
        # Example: Rename/Copy Datetime
        - source_field: "properties.datetime"
          target_field: "properties.acquisition_time"
          type: "string"

  # 4. Validate (Modify)
  - id: validate
    module: ValidateModule
    depends_on: ["transform"]
    config:
      strict: false # Log warnings but don't drop unless critical

  # 5. Output to Disk (Bundler)
  - id: output
    module: OutputModule
    depends_on: ["validate"]
    config:
      format: "json"
      output_path: "data/output/full_pipeline"
      organize_by: "flat"
